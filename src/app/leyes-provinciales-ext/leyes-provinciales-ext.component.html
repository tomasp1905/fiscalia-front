<app-header></app-header>

<div class="card border-primary mb-3">
  <div class="card-header">
    <h5 align="center">LEYES PROVINCIALES</h5>
  </div>
  <div class="card-body text-primary">

    <div class="form-group row">
      <div class="col-sm-6">
        <form class="example-form">
          <mat-form-field class="example-full-width">
            <input type="text" placeholder="Ingrese título de la Ley" aria-label="Leyes" matInput [formControl]="autocompleteControlPorTitulo" [matAutocomplete]="autoTitulo">
            <mat-autocomplete #autoTitulo="matAutocomplete" [displayWith]="mostrarNombrePorTitulo" (optionSelected)="seleccionarLeyPorTitulo($event)">
              <mat-option *ngFor="let leyes of leyesFiltradasPorTitulo | async" [value]="leyes">
                {{leyes.titulo}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </form>
      </div>
    </div>

    <div class="form-group row">
      <div class="col-sm-6">
        <form class="example-form">
          <mat-form-field class="example-full-width">
            <input type="text" placeholder="Ingrese N° de la Ley" aria-label="Leyes" matInput [formControl]="autocompleteControlPorNumero" [matAutocomplete]="autoNumero">
            <mat-autocomplete #autoNumero="matAutocomplete" [displayWith]="mostrarNombrePorNumero" (optionSelected)="seleccionarLeyPorNumero($event)">
              <mat-option *ngFor="let leyes of leyesFiltradasPorNumero | async" [value]="leyes">
                {{leyes.numero}} - {{leyes.titulo}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </form>
      </div>
    </div>

    <br>

    <div *ngIf="leyProvincialExt.listaDeLeyes?.length == 2" class="alert alert-info">
      Debe limpiar la búsqueda para realizar la consulta.
    </div>


    <div class="form-group row">
      <div class="col-auto">
        <table class="table table-bordered" >
          <thead *ngIf="leyProvincialExt.listaDeLeyes?.length == 1">
            <tr class="table-primary" align="center">
              <th>TÍTULO</th>
              <th>NÚMERO</th>
              <th>FECHA SANCIÓN</th>
              <th>PUBLICACIÓN EN BO</th>
              <th>TEXTO ORIGINAL</th>
              <th>TEXTO ACTUALIZADO</th>
            </tr>
          </thead>
          <tbody *ngIf="leyProvincialExt.listaDeLeyes?.length == 1">
            <tr *ngFor="let ley of leyProvincialExt.listaDeLeyes" align="center">
              <td>{{ley.titulo}}</td>
              <td>{{ley.numero}}</td>
              <td>{{ley.fechaSancion}}</td>
              <td>{{ley.publicacionBO}}</td>
              <td *ngIf="ley?.archivo">
                  <a href="http://localhost:8080/api/uploads/archivo/{{ley.archivo}}" target='_blank' title="Ver archivo">Ver archivo</a>
              </td>

              <td *ngIf="ley?.archivoActualizado">
                  <a  href="http://localhost:8080/api/uploadsActualizado/archivo/{{ley.archivoActualizado}}" target='_blank' title="Ver archivo">Ver archivo</a>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <div class="form-group row">
      <div class="col-auto">
        <table class="table table-bordered"  *ngFor="let ley of leyProvincialExt.listaDeLeyes">
          <thead *ngIf="leyProvincialExt.listaDeLeyes?.length == 1">
            <tr class="table-primary" align="center">
              <th *ngIf="ley?.archivoDecretoReglamentario">DECRETO REGLAMENTARIO</th>
              <th *ngIf="ley?.archivoDecretoReglamentario2">DECRETO REGLAMENTARIO</th>
              <th *ngIf="ley?.archivoDecretoReglamentario3">DECRETO REGLAMENTARIO</th>
              <th *ngIf="ley?.archivoDecretoReglamentario4">DECRETO REGLAMENTARIO</th>
              <th *ngIf="ley?.archivoDecretoReglamentario5">DECRETO REGLAMENTARIO</th>
              <th *ngIf="ley?.archivoDecretoReglamentario6">DECRETO REGLAMENTARIO</th>
            </tr>
          </thead>
          <tbody *ngIf="leyProvincialExt.listaDeLeyes?.length == 1">
            <tr *ngFor="let ley of leyProvincialExt.listaDeLeyes" align="center">

              <td *ngIf="ley?.archivoDecretoReglamentario">
                <p><a  href="http://localhost:8080/api/uploadDecretoRelgamentario/archivo/{{ley.archivoDecretoReglamentario}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

              <td *ngIf="ley?.archivoDecretoReglamentario2">
                <p><a href="http://localhost:8080/api/uploadDecretoRelgamentario2/archivo/{{ley.archivoDecretoReglamentario2}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

              <td *ngIf="ley?.archivoDecretoReglamentario3">
                <p><a href="http://localhost:8080/api/uploadDecretoRelgamentario3/archivo/{{ley.archivoDecretoReglamentario3}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

              <td *ngIf="ley?.archivoDecretoReglamentario4">
                <p><a href="http://localhost:8080/api/uploadDecretoRelgamentario4/archivo/{{ley.archivoDecretoReglamentario4}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

              <td *ngIf="ley?.archivoDecretoReglamentario5">
                <p><a href="http://localhost:8080/api/uploadDecretoRelgamentario5/archivo/{{ley.archivoDecretoReglamentario5}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

              <td *ngIf="ley?.archivoDecretoReglamentario6">
                <p><a href="http://localhost:8080/api/uploadDecretoRelgamentario6/archivo/{{ley.archivoDecretoReglamentario6}}" target='_blank' title="Ver archivo">Ver archivo</a></p>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>

  <div class="row">
    <div class="col-10">
      <button class="btn btn-success" (click)="limpiarBusqueda()" role="button">LIMPIAR BÚSQUEDA <i class="fas fa-broom"></i></button>
    </div>
  </div>


  </div>
</div>


<div class="col-10">
  <button class="btn btn-primary" role="button" [routerLink]="['/section']">VOLVER ATRÁS</button>
</div>
